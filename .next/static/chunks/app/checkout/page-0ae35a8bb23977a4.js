(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[279],{6:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var a=r(5155),s=r(2115),l=r(6874),o=r.n(l),c=r(8088),i=r(5695);let n=["Київ, Відділення №1: вул. Пирогівський шлях, 135","Київ, Відділення №2: вул. Богатирська, 11","Київ, Відділення №3: вул. Калачівська, 13 (Стара Дарниця)","Київ, Відділення №4: вул. Верховинна, 69","Київ, Відділення №5: вул. Федорова, 32 (метро Олімпійська)","Київ, Відділення №6: вул. Миколи Василенка, 2","Київ, Відділення №7: вул. Гната Юри, 20 (ТЦ Квадрат)","Київ, Відділення №8: просп. Повітрофлотський, 31","Львів, Відділення №1: вул. Городоцька, 355/6","Львів, Відділення №2: вул. Пластова, 7","Львів, Відділення №3: вул. Угорська, 22","Львів, Відділення №4: вул. Кульпарківська, 93а","Львів, Відділення №5: вул. Зелена, 147","Одеса, Відділення №1: Київське шосе, 27","Одеса, Відділення №2: вул. Базова, 16 (Промринок, 7 км)","Одеса, Відділення №3: вул. Дальницька, 23/4","Одеса, Відділення №4: вул. Академіка Вільямса, 86","Харків, Відділення №1: вул. Польова, 67","Харків, Відділення №2: вул. Примакова, 46","Дніпро, Відділення №1: вул. Маршала Малиновського, 98а"],d=["Київ, Поштомат №1001: вул. Хрещатик, 22","Київ, Поштомат №1002: просп. Перемоги, 17","Київ, Поштомат №1003: вул. Велика Васильківська, 10","Київ, Поштомат №1004: вул. Саксаганського, 55","Київ, Поштомат №1005: вул. Антоновича, 176 (ТРЦ Ocean Plaza)","Київ, Поштомат №1006: вул. Лаврухіна, 4 (ТРЦ РайОН)","Київ, Поштомат №1007: просп. Оболонський, 1Б (ТРЦ Dream Town)","Київ, Поштомат №1008: вул. Берковецька, 6Д (ТРЦ Lavina)","Львів, Поштомат №2001: вул. Під Дубом, 7Б (ТРЦ Forum Lviv)","Львів, Поштомат №2002: вул. Кульпарківська, 226А (ТРЦ Victoria Gardens)","Львів, Поштомат №2003: вул. Стрийська, 30 (ТРЦ King Cross)","Львів, Поштомат №2004: просп. Чорновола, 93","Одеса, Поштомат №3001: вул. Генуезька, 5 (ТРЦ Gagarinn Plaza)","Одеса, Поштомат №3002: пров. Семафорний, 4 (ТРЦ Fontan Sky)","Одеса, Поштомат №3003: просп. Небесної Сотні, 2 (ТРЦ City Center)","Харків, Поштомат №4001: вул. Пушкінська, 2А (ТРЦ Nikolsky)","Харків, Поштомат №4002: вул. Героїв Праці, 7 (ТРЦ Караван)","Дніпро, Поштомат №5001: вул. Глінки, 2 (ТРЦ МОСТ-Сіті)","Дніпро, Поштомат №5002: просп. Дмитра Яворницького, 50 (ТЦ Пасаж)","Вінниця, Поштомат №6001: вул. 600-річчя, 17Е (ТРЦ Мегамолл)"],u=["Київ, Магазин на Паньківській: вул. Паньківська, 20","Київ, Шоурум на Подолі: вул. Ярославська, 57","Львів, Студія шпалер: вул. Коперника, 10","Одеса, Склад-магазин: вул. Середньофонтанська, 19"],h=["Київ, 01001: вул. Хрещатик, 22","Київ, 02002: вул. Митрополита Андрея Шептицького, 16/4","Київ, 03003: просп. Повітрофлотський, 75","Київ, 04004: вул. Кирилівська, 118","Київ, 05005: просп. Перемоги, 45","Львів, 79000: вул. Словацького, 1","Львів, 79005: вул. Галицька, 19","Львів, 79007: вул. Гнатюка, 8","Львів, 79010: вул. Личаківська, 2","Одеса, 65001: вул. Садова, 10","Одеса, 65003: вул. Чорноморського Козацтва, 2","Одеса, 65005: вул. Балківська, 33","Одеса, 65007: вул. Пантелеймонівська, 2","Харків, 61001: майдан Привокзальний, 2","Харків, 61002: вул. Чернишевська, 1","Харків, 61003: майдан Конституції, 7","Дніпро, 49000: просп. Дмитра Яворницького, 62","Дніпро, 49005: вул. Писаржевського, 32","Житомир, 10001: вул. Київська, 20","Вінниця, 21001: вул. Соборна, 59"];function m(e){let{formData:t,handleInputChange:r,errors:s}=e;return(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 sm:p-8 shadow-sm border border-gray-100",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-navy mb-6",children:"Контактні дані"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4 text-black",children:[(0,a.jsx)("input",{type:"text",name:"lastName",placeholder:"Прізвище",value:t.lastName,onChange:r,className:"w-full bg-gray-50 border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-teal/20 focus:border-teal transition-all ".concat(s.lastName?"border-red-500":"border-gray-200")}),(0,a.jsx)("input",{type:"text",name:"firstName",placeholder:"Ім'я",value:t.firstName,onChange:r,className:"w-full bg-gray-50 border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-teal/20 focus:border-teal transition-all ".concat(s.firstName?"border-red-500":"border-gray-200")})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4 text-black",children:[(0,a.jsx)("input",{type:"tel",name:"phone",placeholder:"Телефон",value:t.phone,onChange:r,className:"w-full bg-gray-50 border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-teal/20 focus:border-teal transition-all ".concat(s.phone?"border-red-500":"border-gray-200")}),(0,a.jsx)("input",{type:"email",name:"email",placeholder:"Електронна пошта",value:t.email,onChange:r,className:"w-full bg-gray-50 border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-teal/20 focus:border-teal transition-all ".concat(s.email?"border-red-500":"border-gray-200")})]}),(0,a.jsx)("textarea",{name:"comment",placeholder:"Коментар до замовлення",rows:4,value:t.comment,onChange:r,className:"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-teal/20 focus:border-teal transition-all resize-none text-black"})]})}function x(e){let{placeholder:t,selectedLocation:r,warehouseSearch:s,setWarehouseSearch:l,setSelectedLocation:o,isWarehouseListOpen:c,setIsWarehouseListOpen:i,filteredList:n,errors:d,setErrors:u}=e;return(0,a.jsx)("div",{className:"ml-8 mt-4",children:(0,a.jsxs)("div",{className:"relative z-20",children:[(0,a.jsx)("input",{type:"text",placeholder:t,className:"w-full bg-gray-50 border rounded-xl px-4 py-3 pl-10 focus:outline-none focus:ring-2 focus:ring-teal/20 focus:border-teal transition-all ".concat(d.location?"border-red-500":"border-gray-200"),value:r||s,onChange:e=>{l(e.target.value),o(""),i(!0),d.location&&u(e=>({...e,location:!1}))},onFocus:()=>i(!0),onBlur:()=>setTimeout(()=>i(!1),200)}),(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),c&&(0,a.jsx)("ul",{className:"absolute left-0 right-0 top-full mt-1 bg-white border border-gray-200 rounded-xl max-h-60 overflow-y-auto shadow-lg z-30",children:n&&n.length>0?n.map((e,t)=>(0,a.jsx)("li",{className:"px-4 py-2 hover:bg-gray-50 cursor-pointer text-sm",onClick:()=>{o(e),l(""),i(!1)},children:e},t)):(0,a.jsx)("li",{className:"px-4 py-2 text-sm text-gray-500",children:"Нічого не знайдено"})})]})})}function p(e){let{deliveryMethod:t,setDeliveryMethod:r,novaType:s,setNovaType:l,formData:o,handleInputChange:c,errors:i,setErrors:n,selectedLocation:d,warehouseSearch:u,setWarehouseSearch:h,setSelectedLocation:m,isWarehouseListOpen:p,setIsWarehouseListOpen:f,filteredList:b}=e;return(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 sm:p-8 shadow-sm border border-gray-100",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-navy mb-6",children:"Доставка"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[(0,a.jsx)("button",{onClick:()=>r("nova"),className:"flex items-center justify-center gap-2 py-4 px-4 rounded-xl border-2 transition-all font-medium ".concat("nova"===t?"border-teal text-navy bg-teal/5":"border-gray-200 text-gray-500 hover:border-teal/50"),children:(0,a.jsx)("span",{children:"Нова Пошта"})}),(0,a.jsx)("button",{onClick:()=>r("ukr"),className:"flex items-center justify-center gap-2 py-4 px-4 rounded-xl border-2 transition-all font-medium ".concat("ukr"===t?"border-teal text-navy bg-teal/5":"border-gray-200 text-gray-500 hover:border-teal/50"),children:(0,a.jsx)("span",{children:"Укрпошта"})}),(0,a.jsx)("button",{onClick:()=>r("pickup"),className:"flex items-center justify-center gap-2 py-4 px-4 rounded-xl border-2 transition-all font-medium ".concat("pickup"===t?"border-teal text-navy bg-teal/5":"border-gray-200 text-gray-500 hover:border-teal/50"),children:(0,a.jsx)("span",{children:"Самовивіз"})})]}),"nova"===t&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"group text-black",children:[(0,a.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer",children:[(0,a.jsxs)("div",{className:"relative flex items-center mt-1",children:[(0,a.jsx)("input",{type:"radio",name:"nova_type",className:"peer sr-only",checked:"warehouse"===s,onChange:()=>l("warehouse")}),(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-gray-300 rounded-full peer-checked:border-teal peer-checked:bg-teal transition-all"}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white opacity-0 peer-checked:opacity-100 transform scale-50 peer-checked:scale-100 transition-all",children:(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"block font-medium text-navy group-hover:text-teal transition-colors",children:"Відділення Нової Пошти"}),(0,a.jsx)("span",{className:"text-sm text-gray-500 block",children:"Виберіть або знайдіть відділення"})]})]}),"warehouse"===s&&(0,a.jsx)(x,{placeholder:"Введіть відділення",selectedLocation:d,warehouseSearch:u,setWarehouseSearch:h,setSelectedLocation:m,isWarehouseListOpen:p,setIsWarehouseListOpen:f,filteredList:b,errors:i,setErrors:n})]}),(0,a.jsxs)("div",{className:"group text-black",children:[(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"nova_type",className:"peer sr-only",checked:"poshtamat"===s,onChange:()=>l("poshtamat")}),(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-gray-300 rounded-full peer-checked:border-teal peer-checked:bg-teal transition-all"}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white opacity-0 peer-checked:opacity-100 transform scale-50 peer-checked:scale-100 transition-all",children:(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("span",{className:"block font-medium text-navy group-hover:text-teal transition-colors",children:"Поштомат Нової Пошти"})})]}),"poshtamat"===s&&(0,a.jsx)(x,{placeholder:"Введіть адресу поштомату",selectedLocation:d,warehouseSearch:u,setWarehouseSearch:h,setSelectedLocation:m,isWarehouseListOpen:p,setIsWarehouseListOpen:f,filteredList:b,errors:i,setErrors:n})]}),(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer group text-black",children:[(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"nova_type",className:"peer sr-only",checked:"courier"===s,onChange:()=>l("courier")}),(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-gray-300 rounded-full peer-checked:border-teal peer-checked:bg-teal transition-all"}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white opacity-0 peer-checked:opacity-100 transform scale-50 peer-checked:scale-100 transition-all",children:(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),(0,a.jsx)("span",{className:"font-medium text-navy group-hover:text-teal transition-colors",children:"Кур'єр на вашу адресу"})]}),"courier"===s&&(0,a.jsxs)("div",{className:"ml-8 mt-4 space-y-4",children:[(0,a.jsx)("input",{type:"text",name:"city",placeholder:"Місто",value:o.city,onChange:c,className:"w-full bg-gray-50 border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-teal/20 focus:border-teal transition-all text-black ".concat(i.city?"border-red-500":"border-gray-200")}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)("input",{type:"text",name:"street",placeholder:"Вулиця",value:o.street,onChange:c,className:"w-full bg-gray-50 border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-teal/20 focus:border-teal transition-all text-black ".concat(i.street?"border-red-500":"border-gray-200")}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)("input",{type:"text",name:"house",placeholder:"Буд.",value:o.house,onChange:c,className:"w-full bg-gray-50 border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-teal/20 focus:border-teal transition-all text-black ".concat(i.house?"border-red-500":"border-gray-200")}),(0,a.jsx)("input",{type:"text",name:"apartment",placeholder:"Кв.",value:o.apartment,onChange:c,className:"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-teal/20 focus:border-teal transition-all text-black"})]})]})]})]}),"ukr"===t&&(0,a.jsx)("div",{className:"space-y-4 text-black",children:(0,a.jsxs)("div",{className:"group",children:[(0,a.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer",children:[(0,a.jsxs)("div",{className:"relative flex items-center mt-1",children:[(0,a.jsx)("input",{type:"radio",name:"ukr_type",className:"peer sr-only",defaultChecked:!0}),(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-gray-300 rounded-full peer-checked:border-teal peer-checked:bg-teal transition-all"}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white opacity-0 peer-checked:opacity-100 transform scale-50 peer-checked:scale-100 transition-all",children:(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"block font-medium text-navy group-hover:text-teal transition-colors",children:"Відділення Укрпошти"}),(0,a.jsx)("span",{className:"text-sm text-gray-500 block",children:"Виберіть відділення"})]})]}),(0,a.jsx)(x,{placeholder:"Введіть відділення або індекс",selectedLocation:d,warehouseSearch:u,setWarehouseSearch:h,setSelectedLocation:m,isWarehouseListOpen:p,setIsWarehouseListOpen:f,filteredList:b,errors:i,setErrors:n})]})}),"pickup"===t&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"group text-black",children:[(0,a.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer",children:[(0,a.jsxs)("div",{className:"relative flex items-center mt-1",children:[(0,a.jsx)("input",{type:"radio",name:"pickup_type",className:"peer sr-only",defaultChecked:!0}),(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-gray-300 rounded-full peer-checked:border-teal peer-checked:bg-teal transition-all"}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white opacity-0 peer-checked:opacity-100 transform scale-50 peer-checked:scale-100 transition-all",children:(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"block font-medium text-navy group-hover:text-teal transition-colors",children:"Самовивіз з магазину"}),(0,a.jsx)("span",{className:"text-sm text-gray-500 block",children:"Виберіть точку видачі"})]})]}),(0,a.jsx)(x,{placeholder:"Оберіть магазин",selectedLocation:d,warehouseSearch:u,setWarehouseSearch:h,setSelectedLocation:m,isWarehouseListOpen:p,setIsWarehouseListOpen:f,filteredList:b,errors:i,setErrors:n})]})})]})}function f(e){let{paymentMethod:t,setPaymentMethod:r}=e;return(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 sm:p-8 shadow-sm border border-gray-100",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-navy mb-6",children:"Оплата"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer group",children:[(0,a.jsxs)("div",{className:"relative flex items-center mt-1",children:[(0,a.jsx)("input",{type:"radio",name:"payment",className:"peer sr-only",checked:"card"===t,onChange:()=>r("card")}),(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-gray-300 rounded-full peer-checked:border-teal peer-checked:bg-teal transition-all"}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white opacity-0 peer-checked:opacity-100 transform scale-50 peer-checked:scale-100 transition-all",children:(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"block font-medium text-navy group-hover:text-teal transition-colors",children:"Карткою Visa / MasterCard"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Оплата через LiqPay, ApplePay, GooglePay"})]})]}),(0,a.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer group",children:[(0,a.jsxs)("div",{className:"relative flex items-center mt-1",children:[(0,a.jsx)("input",{type:"radio",name:"payment",className:"peer sr-only",checked:"cod"===t,onChange:()=>r("cod")}),(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-gray-300 rounded-full peer-checked:border-teal peer-checked:bg-teal transition-all"}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white opacity-0 peer-checked:opacity-100 transform scale-50 peer-checked:scale-100 transition-all",children:(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"block font-medium text-navy group-hover:text-teal transition-colors",children:"Післяплата"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Оплата на пошті (комісія НП 2% + 20 грн)"})]})]})]})]})}var b=r(6766);function g(e){let{items:t,totalSum:r,deliveryCost:s,finalTotal:l,handleOrderSubmit:o}=e;return(0,a.jsx)("div",{className:"lg:w-[400px] xl:w-[450px] flex-shrink-0",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 sm:p-8 shadow-sm border border-gray-100 sticky top-24",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-navy mb-6",children:"Ваше замовлення"}),(0,a.jsxs)("div",{className:"space-y-6 mb-8 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:[t.map(e=>(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"relative w-20 h-20 rounded-lg overflow-hidden bg-gray-100 flex-shrink-0",children:(0,a.jsx)(b.default,{src:e.imageUrl||"",alt:e.title,fill:!0,className:"object-cover"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-medium text-navy text-sm line-clamp-2 mb-1",children:e.title}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:["Розмір: ",e.width,"см x ",e.height,"см"]}),(0,a.jsxs)("div",{className:"font-bold text-navy text-sm",children:[e.total," грн"]})]})]},e.id)),0===t.length&&(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:"Кошик порожній"})]}),(0,a.jsxs)("div",{className:"space-y-3 mb-8 pb-8 border-b border-gray-100",children:[(0,a.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,a.jsx)("span",{children:"Сума:"}),(0,a.jsxs)("span",{className:"font-medium",children:[r," грн"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,a.jsx)("span",{children:"Доставка:"}),(0,a.jsxs)("span",{className:"font-medium",children:[s," грн"]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("span",{className:"text-xl font-bold text-navy",children:"Разом до сплати:"}),(0,a.jsxs)("span",{className:"text-2xl font-extrabold text-teal",children:[l," грн"]})]}),(0,a.jsx)("button",{onClick:o,className:"w-full bg-teal text-white font-bold rounded-xl py-4 text-lg hover:bg-navy transition-all shadow-lg shadow-teal/20 hover:shadow-navy/20",children:"ПЕРЕЙТИ ДО ОПЛАТИ"})]})})}function y(){let{items:e,isLoaded:t,clearCart:r}=(0,c._)(),l=(0,i.useRouter)(),[x,b]=(0,s.useState)("nova"),[y,v]=(0,s.useState)("warehouse"),[j,N]=(0,s.useState)("card"),[w,k]=(0,s.useState)({lastName:"",firstName:"",phone:"",email:"",comment:"",city:"",street:"",house:"",apartment:""}),[C,S]=(0,s.useState)(!1),[L,O]=(0,s.useState)({}),[E,I]=(0,s.useState)(""),[W,_]=(0,s.useState)(!1),[T,P]=(0,s.useState)("");(0,s.useEffect)(()=>{!C&&t&&0===e.length&&l.push("/cart")},[e,t,l,C]);let z=(()=>{if("nova"===x){if("warehouse"===y)return n;if("poshtamat"===y)return d}return"ukr"===x?h:"pickup"===x?u:[]})(),D=E?z.filter(e=>e.toLowerCase().includes(E.toLowerCase())):z;(0,s.useEffect)(()=>{I(""),_(!1),P("")},[x,y]);let F=e.reduce((e,t)=>e+t.total,0),M=e=>{let{name:t,value:r}=e.target;k(e=>({...e,[t]:r})),L[t]&&O(e=>({...e,[t]:!1}))},J=async()=>{let t={};w.lastName.trim()||(t.lastName=!0),w.firstName.trim()||(t.firstName=!0),w.phone.trim()||(t.phone=!0),w.email.trim()||(t.email=!0);let a=!0;if("nova"===x?"courier"===y?(w.city.trim()||(t.city=!0),w.street.trim()||(t.street=!0),w.house.trim()||(t.house=!0)):T||E||(t.location=!0,a=!1):"ukr"!==x&&"pickup"!==x||T||E||(t.location=!0,a=!1),O(t),Object.keys(t).length>0||!a)return void alert("Будь ласка, заповніть всі обов'язкові поля та оберіть відділення/адресу.");S(!0);try{let t=localStorage.getItem("token");if(!t){alert("Для оформлення замовлення потрібно авторизуватися."),S(!1);return}let a={items:e.map(e=>{var t,r;let a={},s="efc8d76b-7692-472d-a6f4-5cf02f7c3b01";s=1===e.productTypeId?"b04cf192-d7ee-4eec-8c68-1ebcdf498ba8":2===e.productTypeId?"efc8d76b-7692-472d-a6f4-5cf02f7c3b01":e.width&&e.height&&!(null==(t=e.specifications)?void 0:t.color)?"b04cf192-d7ee-4eec-8c68-1ebcdf498ba8":"efc8d76b-7692-472d-a6f4-5cf02f7c3b01",e.specifications&&Object.assign(a,e.specifications),"b04cf192-d7ee-4eec-8c68-1ebcdf498ba8"===s?(!a.width&&e.width&&(a.width=e.width),!a.height&&e.height&&(a.height=e.height),a.material_id||("object"==typeof e.material&&(null==(r=e.material)?void 0:r.id)?a.material_id=e.material.id:a.material_id="2c4a4e13-7a29-4e98-a8d7-19400f4747d8"),"material"in a&&delete a.material):"efc8d76b-7692-472d-a6f4-5cf02f7c3b01"===s&&("material"in a&&delete a.material,a.color||(a.color="Standard"));let l=e.options?e.options.map(e=>e.label):[];return{productTypeId:s,productId:e.productId,quantity:e.quantity||1,specifications:a,features:l}}),...w,deliveryMethod:x,paymentMethod:j,novaType:"nova"===x?y:void 0,warehouseId:T||void 0};console.log("Submitting order with payload:",JSON.stringify(a,null,2));let s=await fetch("http://localhost:8080/orders",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)});if(!s.ok){let e=await s.text();console.error("Server 500 Error Details:",e);try{let t=JSON.parse(e),r=t.message||t.error||"Failed to submit order";if(r.includes("Internal Error")||r.includes("occurred"))throw Error("Server Error: ".concat(r,". Hint: If the backend restarted, your Cart Items or User Token might be stale (invalid IDs). Try clearing your cart and logging in again."));throw Error(r)}catch(t){if(t.message&&t.message.includes("Hint:"))throw t;throw Error("Failed to submit order: ".concat(e))}}r(),l.push("/checkout/success")}catch(t){console.error("Error submitting order:",t);let e=t.message||"Сталася помилка при оформленні замовлення.";e.includes("backend restarted")?confirm("Помилка сервера: можливо застаріли дані кошика через перезапуск серверу. Очистити кошик?")&&(r(),l.push("/wallpapers")):alert(e)}finally{S(!1)}};return t?(0,a.jsxs)("div",{className:"flex flex-col px-4 sm:px-8 md:px-[clamp(2rem,6vw,8rem)] py-12 bg-gray-50 min-h-screen",children:[(0,a.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold text-navy mb-8 text-center sm:text-left",children:"Оформлення замовлення"}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8 xl:gap-12",children:[(0,a.jsxs)("div",{className:"flex-1 space-y-8",children:[(0,a.jsx)(m,{formData:w,handleInputChange:M,errors:L}),(0,a.jsx)(p,{deliveryMethod:x,setDeliveryMethod:b,novaType:y,setNovaType:v,formData:w,handleInputChange:M,errors:L,setErrors:O,selectedLocation:T,warehouseSearch:E,setWarehouseSearch:I,setSelectedLocation:P,isWarehouseListOpen:W,setIsWarehouseListOpen:_,filteredList:D}),(0,a.jsx)(f,{paymentMethod:j,setPaymentMethod:N}),(0,a.jsxs)(o(),{href:"/cart",className:"inline-flex items-center text-teal font-semibold hover:text-navy transition-colors",children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-2 rotate-180",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})}),"Повернутися до корзини"]})]}),(0,a.jsx)(g,{items:e,totalSum:F,deliveryCost:60,finalTotal:F+60,handleOrderSubmit:J})]})]}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:"Loading..."})}},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},5872:(e,t,r)=>{Promise.resolve().then(r.bind(r,6))},8088:(e,t,r)=>{"use strict";r.d(t,{CartProvider:()=>o,_:()=>c});var a=r(5155),s=r(2115);let l=(0,s.createContext)(void 0),o=e=>{let{children:t}=e,[r,o]=(0,s.useState)([]),[c,i]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=localStorage.getItem("cart");if(e)try{o(JSON.parse(e))}catch(e){console.error("Failed to parse cart from local storage",e)}i(!0)},[]),(0,s.useEffect)(()=>{localStorage.setItem("cart",JSON.stringify(r))},[r]),(0,a.jsx)(l.Provider,{value:{items:r,addToCart:e=>{let t={...e,id:Date.now().toString()};o(e=>[...e,t])},removeFromCart:e=>{o(t=>t.filter(t=>t.id!==e))},clearCart:()=>{o([])},isLoaded:c},children:t})},c=()=>{let e=(0,s.useContext)(l);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}}},e=>{e.O(0,[874,766,441,964,358],()=>e(e.s=5872)),_N_E=e.O()}]);